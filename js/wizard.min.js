/*!
 * Start Bootstrap - Agency v4.1.1 (https://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-agency/blob/master/LICENSE)
 */
"use strict";function scroll_to_class(n,e){var r=$(n).offset().top-e;$(window).scrollTop()!=r&&$(".form-wizard").stop().animate({scrollTop:r},0)}var selected_suffix,current_screen,form_prefix_id=".form-wizard fieldset#",first_screen_id="first-screen",adult_screen_id="adult-screen",bambino_screen_id="bambino-screen",junior_screen_id="junior-screen",final_screen_id="final-screen",suffix_banquet="-banquet",suffix_vin="-vin",last_prefix="last-",main_course_1="Cod fillet with sun grilled vegetables, crushed potatoes with olive oil & sun dried tomato cream",main_course_2="Noisette of lamb marinated at the orient parfum, roasted pear, glazed multicolored carrots & golden potatoes",input_pattern="input#",vin_honneur_id=input_pattern+"vin_honneur",banquet_id=input_pattern+"banquet",number_adult_id=input_pattern+"number_adult",number_bambino_id=input_pattern+"number_bambino",number_junior_id=input_pattern+"number_junior",cannot_attend_id=input_pattern+"cannot_attend",stay_night_id=input_pattern+"stay_night",name_adult_id="name-adult",main_checkbox_1_id="main-adult-banquet-1",main_checkbox_2_id="main-adult-banquet-2",main_adult_banquet="main-adult-banquet",name_bambino_id="name-bambino",name_junior_id="name-junior",cannot_attend=!1,vin_honneur=!1,banquet=!1,stay_night=!1,nb_adult=0,nb_bambino=0,nb_junior=0,current_nb_adult=0,current_nb_bambino=0,current_nb_junior=0;function is_last_adult(){return current_nb_adult==nb_adult-1}function no_children(){return no_bambino()&&no_junior()}function no_bambino(){return 0==nb_bambino}function is_last_bambino(){return current_nb_bambino==nb_bambino-1}function no_junior(){return 0==nb_junior}function is_last_junior(){return current_nb_junior==nb_junior-1}var adults=[],juniors=[],bambinos=[];function Adult(n,e,r,t,_,i){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=r,this.stay_for_the_night=t,this.main_1=_,this.main_2=i}function Bambino(n,e,r,t){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=r,this.stay_for_the_night=t}function Junior(n,e,r,t){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=r,this.stay_for_the_night=t}function addAdult(n){var e=n.find(input_pattern+name_adult_id)[0].value;if(banquet)var r=n.find(input_pattern+main_checkbox_1_id)[0].checked,t=n.find(input_pattern+main_checkbox_2_id)[0].checked;else r=banquet,t=banquet;var _=new Adult(e,vin_honneur,banquet,stay_night,r,t);adults.push(_),console.log(_.name+", "+_.attend_to_vin_honneur+", "+_.attend_to_diner+", "+_.stay_for_the_night+", "+_.starter_1+", "+_.starter_2+", "+_.main_1+", "+_.main_2),current_nb_adult++}function addBambino(n){var e=new Bambino(n.find(input_pattern+name_bambino_id)[0].value,vin_honneur,banquet,stay_night);bambinos.push(e),console.log(e.name+", "+e.attend_to_vin_honneur+", "+e.attend_to_diner),current_nb_bambino++}function addJunior(n){var e=new Junior(n.find(input_pattern+name_junior_id)[0].value,vin_honneur,banquet,stay_night);juniors.push(e),console.log(e.name+", "+e.attend_to_vin_honneur+", "+e.attend_to_diner),current_nb_junior++}function fields_validation(n){var e=!0,r=!1,t=!1;return n.find("input").each(function(){$(this).removeClass("input-error"),$(this)[0].required&&""==$(this)[0].value&&($(this).addClass("input-error"),e=!1),"radio"==$(this)[0].type&&(t=!0,r|=$(this)[0].checked)}),t&&!r?(n.find("input").each(function(){"radio"==$(this)[0].type&&$(this).addClass("checkbox-error")}),!1):e}function restore_previous_answer_bambinos(n){var e=bambinos[current_nb_bambino].name;n.find(input_pattern+name_bambino_id)[0].value=e}function restore_previous_answer_junior(n){var e=juniors[current_nb_junior].name;n.find(input_pattern+name_junior_id)[0].value=e}function restore_previous_answer_adult(n){var e=adults[current_nb_adult].name;n.find(input_pattern+name_adult_id)[0].value=e,banquet&&(n.find(input_pattern+start_checkbox_1_id)[0].checked=adults[current_nb_adult].starter_1,n.find(input_pattern+start_checkbox_2_id)[0].checked=adults[current_nb_adult].starter_2,n.find(input_pattern+main_checkbox_1_id)[0].checked=adults[current_nb_adult].main_1,n.find(input_pattern+main_checkbox_2_id)[0].checked=adults[current_nb_adult].main_2)}function get_next_screen_id(n,e){var r=form_prefix_id+(e?last_prefix:"")+n+selected_suffix;return console.log("next screen id: "+r),r}function set_errors_on_checkboxes(n){n.find("input").each(function(){"checkbox"==$(this)[0].type&&$(this).addClass("checkbox-error")})}function get_next_screen(n){var e;return current_screen[0].id.includes("adult")?(addAdult(n),current_nb_adult==nb_adult?e=no_bambino()?$(get_next_screen_id(junior_screen_id,is_last_junior())):$(get_next_screen_id(bambino_screen_id,is_last_bambino()&&no_junior())):(e=$(get_next_screen_id(adult_screen_id,is_last_adult()&&no_children()))).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1)):current_screen[0].id.includes("bambino")?(addBambino(n),current_nb_bambino==nb_bambino?e=$(get_next_screen_id(junior_screen_id,is_last_junior())):(e=$(get_next_screen_id(bambino_screen_id,is_last_bambino()&&no_junior()))).find("h3")[0].innerHTML="Bambino "+(current_nb_bambino+1)):current_screen[0].id.includes("junior")&&(addJunior(n),(e=$(get_next_screen_id(junior_screen_id,is_last_junior()))).find("h3")[0].innerHTML="Junior "+(current_nb_junior+1)),e}$("#form").change(function(){$(this).find(".checkbox-error").each(function(){$(this).removeClass("checkbox-error")})}),jQuery(document).ready(function(){$(".form-wizard fieldset:first").fadeIn("slow"),current_screen=$(".form-wizard fieldset:first"),$(".form-wizard .required").on("focus",function(){$(this).removeClass("input-error")}),$(".form-wizard .btn-next").on("click",function(){var n=$(this).parents("fieldset"),e=fields_validation(n);if(e){var r;if(current_screen[0].id==first_screen_id){if(vin_honneur=n.find(vin_honneur_id)[0].checked,banquet=n.find(banquet_id)[0].checked,cannot_attend=n.find(cannot_attend_id)[0].checked,stay_night=n.find(stay_night_id)[0].checked,nb_adult=n.find(number_adult_id)[0].value,nb_bambino=n.find(number_bambino_id)[0].value,nb_junior=n.find(number_junior_id)[0].value,console.log(cannot_attend+", "+vin_honneur+", "+banquet+", "+stay_night+", "+nb_adult+", "+nb_bambino+", "+nb_junior),current_nb_junior=current_nb_bambino=current_nb_adult=0,cannot_attend&&(banquet||vin_honneur||stay_night))return void set_errors_on_checkboxes(n);if(!cannot_attend&&!banquet&&!vin_honneur)return void set_errors_on_checkboxes(n);if(!banquet&&stay_night)return void set_errors_on_checkboxes(n);selected_suffix=banquet?suffix_banquet:suffix_vin,console.log(is_last_adult()&&no_children());var t=form_prefix_id+(is_last_adult()&&no_children()?last_prefix:"")+adult_screen_id+selected_suffix;console.log("next_screen_id "+t),(r=$(t)).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1)}else r=get_next_screen(n);e?(n.fadeOut(400,function(){r.fadeIn(),$("form").trigger("reset"),scroll_to_class($(".form-wizard"),20)}),current_screen=r):$("form").trigger("reset")}}),$(".form-wizard .btn-previous").on("click",function(){var n;$("form").trigger("reset"),console.log(current_screen[0].id),current_screen[0].id.includes("adult")?0==current_nb_adult?n=$(form_prefix_id+first_screen_id):((n=$(form_prefix_id+adult_screen_id+selected_suffix)).find("h3")[0].innerHTML="Adult "+current_nb_adult,current_nb_adult--,restore_previous_answer_adult(n),adults.splice(current_nb_adult,1)):current_screen[0].id.includes("bambino")&&(0==current_nb_bambino?((n=$(form_prefix_id+adult_screen_id+selected_suffix)).find("h3")[0].innerHTML="Adult "+current_nb_adult,current_nb_adult--,restore_previous_answer_adult(n),adults.splice(current_nb_adult,1)):((n=n=$(form_prefix_id+bambino_screen_id+selected_suffix)).find("h3")[0].innerHTML="Bambino "+current_nb_bambino,current_nb_bambino--,restore_previous_answer_bambinos(n),bambinos.splice(current_nb_bambino,1))),$(this).parents("fieldset").fadeOut(400,function(){console.log(n),n.fadeIn(),scroll_to_class($(".form-wizard"),20)}),current_screen=n}),$(".form-wizard .btn-submit").on("click",function(n){var e=$(this).parents("fieldset");if(fields_validation(e)){get_next_screen(e);var r=$(form_prefix_id+final_screen_id);e.fadeOut(400,function(){r.fadeIn(),scroll_to_class($(".form-wizard"),20)}),current_screen=r,$(this).parents("form").find("h3")[0].innerHTML="Summary",display_summary(current_screen[0]),launch_requests()}})});var base_request="https://docs.google.com/forms/d/e/1FAIpQLSemhVmKC20k3ozwZ8GdnbPHt7jsg-CQGp1XcWuHWVRJPWykNg/formResponse?usp=pp_url&",adult_key_word="entry.15813303=",bambino_key_word="entry.361261552=",junior_key_word="entry.1940980314=",person_name_var="entry.838394143=",cannot_attend_key_word="entry.1753887996=",vin_honneur_key_word="entry.368455988=",banquet_key_word="entry.1238711954=",stay_for_the_night_key_word="entry.1400953758=",main_course_1_key_word="entry.2024417387=",main_course_2_key_word="entry.252423998=",submit="&submit=Submit",ok_key_word="1",ko_key_word="0";function launch_requests(){launch_requests_for_given_array(adults,adult_key_word),launch_requests_for_given_array(bambinos,bambino_key_word),launch_requests_for_given_array(juniors,junior_key_word)}function launch_requests_for_given_array(n,e){for(var r=0;r<n.length;r++){var t=n[r],_=[];_.push(base_request),_.push(adult_key_word+(0==e.localeCompare(adult_key_word)?ok_key_word:ko_key_word)),_.push(bambino_key_word+(0==e.localeCompare(bambino_key_word)?ok_key_word:ko_key_word)),_.push(junior_key_word+(0==e.localeCompare(junior_key_word)?ok_key_word:ko_key_word)),_.push(person_name_var+t.name),_.push(get_attendance_request()),banquet&&0==e.localeCompare(adult_key_word)?(_.push(main_course_1_key_word+(t.main_1?ok_key_word:ko_key_word)),_.push(main_course_2_key_word+(t.main_2?ok_key_word:ko_key_word))):(_.push(main_course_1_key_word+ko_key_word),_.push(main_course_2_key_word+ko_key_word)),_.push(submit);var i=_.join("&");console.log(i);var a=new XMLHttpRequest;a.open("GET",i,!0),a.send()}}function get_attendance_request(){var n=[];return n.push(cannot_attend_key_word+(cannot_attend?ok_key_word:ko_key_word)),n.push(vin_honneur_key_word+(vin_honneur?ok_key_word:ko_key_word)),n.push(banquet_key_word+(banquet?ok_key_word:ko_key_word)),n.push(stay_for_the_night_key_word+(stay_night?ok_key_word:ko_key_word)),n.join("&")}function display_summary(n){var e=document.createElement("div"),r=get_all_names();if(cannot_attend)e.appendChild(build_cannot_attend_summary(r));else{var t=document.createElement("p");t.innerHTML=build_sentence_to_attend(r),e.appendChild(t),banquet&&e.appendChild(build_chosen_main_course()),stay_night&&e.appendChild(build_will_stay_nigh(r))}n.appendChild(e)}function build_cannot_attend_summary(n){var e=document.createElement("p");return e.innerHTML=build_sentence_from_given_array_with_given_suffix(n," cannot attend."),e}function build_will_stay_nigh(n){var e=document.createElement("p");return e.innerHTML=build_sentence_from_given_array_with_given_suffix(n," will stay for the night."),e}function build_chosen_main_course(){for(var n=[],e=[],r=0;r<adults.length;r++){var t=adults[r];t.main_1?n.push(t.name):e.push(t.name)}var _=document.createElement("div");if(0<n.length){var i=document.createElement("p");i.innerHTML=build_sentence_from_given_array_with_given_suffix(n," will have "+main_course_1+"."),_.appendChild(i)}return 0<e.length&&((i=document.createElement("p")).innerHTML=build_sentence_from_given_array_with_given_suffix(e," will have "+main_course_2+"."),_.appendChild(i)),_}function build_sentence_from_given_array_with_given_suffix(n,e){var r="";if(2<n.length)for(var t=0;t<n.length-2;t++)r+=n[t]+", ";return 1<n.length?r+=n[n.length-2]+" and "+n[n.length-1]+e:r+=n[n.length-1]+e,r}function build_sentence_to_attend(n){var e=build_sentence_from_given_array_with_given_suffix(n," will attend to ");return vin_honneur?(e+=" the vin d'honneur",e+=banquet?" and to the banquet.":"."):e+=" the banquet.",e}function get_all_names(){var n=iterate_and_append(adults);return n=(n=n.concat(iterate_and_append(bambinos))).concat(iterate_and_append(juniors))}function iterate_and_append(n){for(var e=[],r=0;r<n.length;r++){var t=n[r];e.push(t.name)}return console.log(e),e}var $dropzone=$(".image_picker"),$droptarget=$(".drop_target"),$dropinput=$("#inputFile"),$dropimg=$(".image_preview"),$remover=$('[data-action="remove_current_image"]');$dropzone.on("dragover",function(){return $droptarget.addClass("dropping"),!1}),$dropzone.on("dragend dragleave",function(){return $droptarget.removeClass("dropping"),!1}),$dropzone.on("drop",function(n){$droptarget.removeClass("dropping"),$droptarget.addClass("dropped"),$remover.removeClass("disabled"),n.preventDefault();var e=n.originalEvent.dataTransfer.files[0],r=new FileReader;return r.onload=function(n){$dropimg.css("background-image","url("+n.target.result+")")},console.log(e),r.readAsDataURL(e),!1}),$dropinput.change(function(n){$droptarget.addClass("dropped"),$remover.removeClass("disabled"),$(".image_title input").val("");var e=$dropinput.get(0).files[0],r=new FileReader;r.onload=function(n){$dropimg.css("background-image","url("+n.target.result+")")},r.readAsDataURL(e)}),$remover.on("click",function(){$dropimg.css("background-image",""),$droptarget.removeClass("dropped"),$remover.addClass("disabled"),$(".image_title input").val("")}),$(".image_title input").blur(function(){""!=$(this).val()&&$droptarget.removeClass("dropped")});