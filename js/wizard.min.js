/*!
 * Start Bootstrap - Agency v4.1.1 (https://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-agency/blob/master/LICENSE)
 */
"use strict";function scroll_to_class(e,t){var n=$(e).offset().top-t;$(window).scrollTop()!=n&&$(".form-wizard").stop().animate({scrollTop:n},0)}var vin_honneur,banquet,nb_adult,nb_bambinos,nb_junior,current_screen,form_prefix_id=".form-wizard fieldset#",first_screen_id="first-screen",adult_banquet_screen_id="adult-banquet-screen",adult_vin_screen_id="adult-vin-screen",last_adult_banquet_screen_id="last-adult-banquet-screen",last_adult_vin_screen_id="last-adult-vin-screen",bambino_banquet_screen_id="adult-banquet-screen",bambino_vin_screen_id="adult-vin-screen",last_bambino_banquet_screen_id="last-adult-banquet-screen",last_bambino_vin_screen_id="last-adult-vin-screen",junior_banquet_screen_id="adult-banquet-screen",junior_vin_screen_id="adult-vin-screen",last_junior_banquet_screen_id="last-adult-banquet-screen",last_junior_vin_screen_id="last-adult-vin-screen",input_pattern="input#",vin_honneur_id=input_pattern+"vin_honneur",banquet_id=input_pattern+"banquet",number_adult_id=input_pattern+"number_adult",number_bambino_id=input_pattern+"number_bambino",number_junior_id=input_pattern+"number_junior",name_adult_id="name-adult",start_checkbox_1_id="starter-adult-banquet-1",start_checkbox_2_id="starter-adult-banquet-2",main_checkbox_1_id="main-adult-banquet-1",main_checkbox_2_id="main-adult-banquet-2",starter_adult_banquet="starter-adult-banquet",main_adult_banquet="main-adult-banquet",last_prefix="last-",current_nb_adult=0,current_nb_bambinos=0,current_nb_junior=0;function is_last_adult(){return current_nb_adult==nb_adult-1}function no_children(){return no_bambino&&no_junior}function no_bambino(){return 0==current_nb_bambinos}function no_junior(){return 0==current_nb_junior}var adults=[],juniors=[],bambinos=[];function Adult(e,t,n,r,a,i,_){this.name=e,this.attend_to_vin_honneur=t,this.attend_to_diner=n,this.starter_1=r,this.starter_2=a,this.main_1=i,this.main_2=_}function printAdult(e){console.log(e.name+", "+e.attend_to_vin_honneur+", "+e.attend_to_diner+", "+e.starter_1+", "+e.starter_2+", "+e.main_1+", "+e.main_2)}function addAdult(e){var t=e.find(input_pattern+name_adult_id)[0].value;if(banquet)var n=e.find(input_pattern+start_checkbox_1_id)[0].checked,r=e.find(input_pattern+start_checkbox_2_id)[0].checked,a=e.find(input_pattern+main_checkbox_1_id)[0].checked,i=e.find(input_pattern+main_checkbox_2_id)[0].checked;else n=banquet,r=banquet,a=banquet,i=banquet;var _=new Adult(t,vin_honneur,banquet,n,r,a,i);adults.push(_),console.log(_.name+", "+_.attend_to_vin_honneur+", "+_.attend_to_diner+", "+_.starter_1+", "+_.starter_2+", "+_.main_1+", "+_.main_2),current_nb_adult++}function fields_validation(e){var t=!0;return e.find("input").each(function(){$(this).removeClass("input-error"),$(this)[0].required&&""==$(this)[0].value&&($(this).addClass("input-error"),t=!1)}),t}function restore_previous_answer_adult(e){var t=adults[current_nb_adult].name;e.find(input_pattern+name_adult_id)[0].value=t,banquet&&(e.find(input_pattern+start_checkbox_1_id)[0].checked=adults[current_nb_adult].starter_1,e.find(input_pattern+start_checkbox_2_id)[0].checked=adults[current_nb_adult].starter_2,e.find(input_pattern+main_checkbox_1_id)[0].checked=adults[current_nb_adult].main_1,e.find(input_pattern+main_checkbox_2_id)[0].checked=adults[current_nb_adult].main_2)}jQuery(document).ready(function(){$(".form-wizard fieldset:first").fadeIn("slow"),current_screen=$(".form-wizard fieldset:first"),$(".form-wizard .required").on("focus",function(){$(this).removeClass("input-error")}),$(".form-wizard .btn-next").on("click",function(){var e,t=$(this).parents("fieldset"),n=fields_validation(t);current_screen[0].id==first_screen_id?(vin_honneur=t.find(vin_honneur_id)[0].checked,banquet=t.find(banquet_id)[0].checked,nb_adult=t.find(number_adult_id)[0].value,current_nb_adult=0,banquet||vin_honneur?e=banquet?$(form_prefix_id+(is_last_adult()&&no_children()?last_prefix:"")+adult_banquet_screen_id):$(form_prefix_id+(is_last_adult()&&no_children()?last_prefix:"")+adult_vin_screen_id):(alert("You don't need to fill the form if you don't come! Please check at least one event to attend (vin d'honneur or Diner)"),$("form").trigger("reset"),n=!1)):current_screen[0].id.startsWith("adult")&&(addAdult(t),banquet?(e=$(form_prefix_id+(is_last_adult()?last_prefix:"")+adult_banquet_screen_id)).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1):(e=$(form_prefix_id+(is_last_adult()?last_prefix:"")+adult_vin_screen_id)).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1)),n?(t.fadeOut(400,function(){e.fadeIn(),$("form").trigger("reset"),scroll_to_class($(".form-wizard"),20)}),current_screen=e):$("form").trigger("reset")}),$(".form-wizard .btn-previous").on("click",function(){var e;$("form").trigger("reset"),current_screen[0].id.includes("adult")&&(0==current_nb_adult?e=$(form_prefix_id+first_screen_id):(e=banquet?$(form_prefix_id+adult_banquet_screen_id):$(form_prefix_id+adult_vin_screen_id),current_nb_adult--,restore_previous_answer_adult(e),adults.splice(current_nb_adult,1))),$(this).parents("fieldset").fadeOut(400,function(){e.fadeIn(),scroll_to_class($(".form-wizard"),20)}),current_screen=e}),$(".form-wizard .btn-submit").on("click",function(e){var t=$(this).parents("fieldset");if(fields_validation(t)){$(this).find(".required").each(function(){""==$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),current_screen[0].id.startsWith("last-adult")&&addAdult(t);for(var n=0;n<nb_adult;n++){var r=adults[n];console.log(r.name+", "+r.attend_to_vin_honneur+", "+r.attend_to_diner+", "+r.starter_1+", "+r.starter_2+", "+r.main_1+", "+r.main_2)}}})});var $dropzone=$(".image_picker"),$droptarget=$(".drop_target"),$dropinput=$("#inputFile"),$dropimg=$(".image_preview"),$remover=$('[data-action="remove_current_image"]');$dropzone.on("dragover",function(){return $droptarget.addClass("dropping"),!1}),$dropzone.on("dragend dragleave",function(){return $droptarget.removeClass("dropping"),!1}),$dropzone.on("drop",function(e){$droptarget.removeClass("dropping"),$droptarget.addClass("dropped"),$remover.removeClass("disabled"),e.preventDefault();var t=e.originalEvent.dataTransfer.files[0],n=new FileReader;return n.onload=function(e){$dropimg.css("background-image","url("+e.target.result+")")},console.log(t),n.readAsDataURL(t),!1}),$dropinput.change(function(e){$droptarget.addClass("dropped"),$remover.removeClass("disabled"),$(".image_title input").val("");var t=$dropinput.get(0).files[0],n=new FileReader;n.onload=function(e){$dropimg.css("background-image","url("+e.target.result+")")},n.readAsDataURL(t)}),$remover.on("click",function(){$dropimg.css("background-image",""),$droptarget.removeClass("dropped"),$remover.addClass("disabled"),$(".image_title input").val("")}),$(".image_title input").blur(function(){""!=$(this).val()&&$droptarget.removeClass("dropped")});