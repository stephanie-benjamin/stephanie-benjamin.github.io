/*!
 * Start Bootstrap - Agency v4.1.1 (https://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-agency/blob/master/LICENSE)
 */
"use strict";function scroll_to_class(n,e){var t=$(n).offset().top-e;$(window).scrollTop()!=t&&$(".form-wizard").stop().animate({scrollTop:t},0)}var selected_suffix,current_screen,form_prefix_id=".form-wizard fieldset#",first_screen_id="first-screen",adult_screen_id="adult-screen",bambino_screen_id="bambino-screen",junior_screen_id="junior-screen",final_screen_id="final-screen",suffix_banquet="-banquet",suffix_vin="-vin",last_prefix="last-",input_pattern="input#",vin_honneur_id=input_pattern+"vin_honneur",banquet_id=input_pattern+"banquet",number_adult_id=input_pattern+"number_adult",number_bambino_id=input_pattern+"number_bambino",number_junior_id=input_pattern+"number_junior",cannot_attend_id=input_pattern+"cannot_attend",stay_night_id=input_pattern+"stay_night",name_adult_id="name-adult",main_checkbox_1_id="main-adult-banquet-1",main_checkbox_2_id="main-adult-banquet-2",main_adult_banquet="main-adult-banquet",name_bambino_id="name-bambino",name_junior_id="name-junior",cannot_attend=!1,vin_honneur=!1,banquet=!1,stay_night=!1,nb_adult=0,nb_bambino=0,nb_junior=0,current_nb_adult=0,current_nb_bambino=0,current_nb_junior=0;function is_last_adult(){return current_nb_adult==nb_adult-1}function no_children(){return no_bambino()&&no_junior()}function no_bambino(){return 0==nb_bambino}function is_last_bambino(){return current_nb_bambino==nb_bambino-1}function no_junior(){return 0==nb_junior}function is_last_junior(){return current_nb_junior==nb_junior-1}var adults=[],juniors=[],bambinos=[];function Adult(n,e,t,r,i,_){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=t,this.stay_for_the_night=r,this.main_1=i,this.main_2=_}function Bambino(n,e,t,r){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=t,this.stay_for_the_night=r}function Junior(n,e,t,r){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=t,this.stay_for_the_night=r}function addAdult(n){var e=n.find(input_pattern+name_adult_id)[0].value;if(banquet)var t=n.find(input_pattern+main_checkbox_1_id)[0].checked,r=n.find(input_pattern+main_checkbox_2_id)[0].checked;else t=banquet,r=banquet;var i=new Adult(e,vin_honneur,banquet,stay_night,t,r);adults.push(i),console.log(i.name+", "+i.attend_to_vin_honneur+", "+i.attend_to_diner+", "+i.stay_for_the_night+", "+i.starter_1+", "+i.starter_2+", "+i.main_1+", "+i.main_2),current_nb_adult++}function addBambino(n){var e=new Bambino(n.find(input_pattern+name_bambino_id)[0].value,vin_honneur,banquet,stay_night);bambinos.push(e),console.log(e.name+", "+e.attend_to_vin_honneur+", "+e.attend_to_diner),current_nb_bambino++}function addJunior(n){var e=new Junior(n.find(input_pattern+name_junior_id)[0].value,vin_honneur,banquet,stay_night);juniors.push(e),console.log(e.name+", "+e.attend_to_vin_honneur+", "+e.attend_to_diner),current_nb_junior++}function fields_validation(n){var e=!0;return n.find("input").each(function(){$(this).removeClass("input-error"),$(this)[0].required&&""==$(this)[0].value&&($(this).addClass("input-error"),e=!1)}),e}function restore_previous_answer_bambinos(n){var e=bambinos[current_nb_bambino].name;n.find(input_pattern+name_bambino_id)[0].value=e}function restore_previous_answer_junior(n){var e=juniors[current_nb_junior].name;n.find(input_pattern+name_junior_id)[0].value=e}function restore_previous_answer_adult(n){var e=adults[current_nb_adult].name;n.find(input_pattern+name_adult_id)[0].value=e,banquet&&(n.find(input_pattern+start_checkbox_1_id)[0].checked=adults[current_nb_adult].starter_1,n.find(input_pattern+start_checkbox_2_id)[0].checked=adults[current_nb_adult].starter_2,n.find(input_pattern+main_checkbox_1_id)[0].checked=adults[current_nb_adult].main_1,n.find(input_pattern+main_checkbox_2_id)[0].checked=adults[current_nb_adult].main_2)}function get_next_screen_id(n,e){var t=form_prefix_id+(e?last_prefix:"")+n+selected_suffix;return console.log("next screen id: "+t),t}function set_errors_on_checkboxes(n){n.find("input").each(function(){"checkbox"==$(this)[0].type&&$(this).addClass("checkbox-error")})}function get_next_screen(n){var e;return current_screen[0].id.includes("adult")?(addAdult(n),current_nb_adult==nb_adult?e=no_bambino()?$(get_next_screen_id(junior_screen_id,is_last_junior())):$(get_next_screen_id(bambino_screen_id,is_last_bambino()&&no_junior())):(e=$(get_next_screen_id(adult_screen_id,is_last_adult()&&no_children()))).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1)):current_screen[0].id.includes("bambino")?(addBambino(n),current_nb_bambino==nb_bambino?e=$(get_next_screen_id(junior_screen_id,is_last_junior())):(e=$(get_next_screen_id(bambino_screen_id,is_last_bambino()&&no_junior()))).find("h3")[0].innerHTML="Bambino "+(current_nb_bambino+1)):current_screen[0].id.includes("junior")&&(addJunior(n),(e=$(get_next_screen_id(junior_screen_id,is_last_junior()))).find("h3")[0].innerHTML="Junior "+(current_nb_junior+1)),e}function display_summary(n){var e=document.createElement("div"),t=get_all_names(),r=document.createElement("p");r.innerHTML=build_sentence_to_attend(t),e.appendChild(r),n.appendChild(e)}function build_sentence_to_attend(n){var e="";if(2<n.length)for(var t=0;t<n.length-2;t++)e+=n[t]+", ";return 1<n.length?e+=n[n.length-2]+" and "+n[n.length-1]+" will attend to ":e+=n[n.length-1]+" will attend to ",vin_honneur?(e+=" the vin d'honneur",e+=banquet?" and to the banquet.":"."):e+=" the banquet.",e}function get_all_names(){var n=iterate_and_append(adults);return n=(n=n.concat(iterate_and_append(bambinos))).concat(iterate_and_append(juniors))}function iterate_and_append(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r.name)}return console.log(e),e}$("#form").change(function(){$(this).find(".checkbox-error").each(function(){$(this).removeClass("checkbox-error")})}),jQuery(document).ready(function(){$(".form-wizard fieldset:first").fadeIn("slow"),current_screen=$(".form-wizard fieldset:first"),$(".form-wizard .required").on("focus",function(){$(this).removeClass("input-error")}),$(".form-wizard .btn-next").on("click",function(){var n=$(this).parents("fieldset"),e=fields_validation(n);if(e){var t;if(current_screen[0].id==first_screen_id){if(vin_honneur=n.find(vin_honneur_id)[0].checked,banquet=n.find(banquet_id)[0].checked,cannot_attend=n.find(cannot_attend_id)[0].checked,stay_night=n.find(stay_night_id)[0].checked,nb_adult=n.find(number_adult_id)[0].value,nb_bambino=n.find(number_bambino_id)[0].value,nb_junior=n.find(number_junior_id)[0].value,console.log(cannot_attend+", "+vin_honneur+", "+banquet+", "+stay_night+", "+nb_adult+", "+nb_bambino+", "+nb_junior),current_nb_junior=current_nb_bambino=current_nb_adult=0,cannot_attend&&(banquet||vin_honneur||stay_night))return void set_errors_on_checkboxes(n);if(!cannot_attend&&!banquet&&!vin_honneur)return void set_errors_on_checkboxes(n);if(!banquet&&stay_night)return void set_errors_on_checkboxes(n);selected_suffix=banquet?suffix_banquet:suffix_vin,console.log(is_last_adult()&&no_children());var r=form_prefix_id+(is_last_adult()&&no_children()?last_prefix:"")+adult_screen_id+selected_suffix;console.log("next_screen_id "+r),(t=$(r)).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1)}else t=get_next_screen(n);e?(n.fadeOut(400,function(){t.fadeIn(),$("form").trigger("reset"),scroll_to_class($(".form-wizard"),20)}),current_screen=t):$("form").trigger("reset")}}),$(".form-wizard .btn-previous").on("click",function(){var n;$("form").trigger("reset"),console.log(current_screen[0].id),current_screen[0].id.includes("adult")?0==current_nb_adult?n=$(form_prefix_id+first_screen_id):((n=$(form_prefix_id+adult_screen_id+selected_suffix)).find("h3")[0].innerHTML="Adult "+current_nb_adult,current_nb_adult--,restore_previous_answer_adult(n),adults.splice(current_nb_adult,1)):current_screen[0].id.includes("bambino")&&(0==current_nb_bambino?((n=$(form_prefix_id+adult_screen_id+selected_suffix)).find("h3")[0].innerHTML="Adult "+current_nb_adult,current_nb_adult--,restore_previous_answer_adult(n),adults.splice(current_nb_adult,1)):((n=n=$(form_prefix_id+bambino_screen_id+selected_suffix)).find("h3")[0].innerHTML="Bambino "+current_nb_bambino,current_nb_bambino--,restore_previous_answer_bambinos(n),bambinos.splice(current_nb_bambino,1))),$(this).parents("fieldset").fadeOut(400,function(){console.log(n),n.fadeIn(),scroll_to_class($(".form-wizard"),20)}),current_screen=n}),$(".form-wizard .btn-submit").on("click",function(n){var e=$(this).parents("fieldset");fields_validation(e)&&($(this).find(".required").each(function(){""==$(this).val()?(n.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),get_next_screen(e));var t=$(form_prefix_id+final_screen_id);e.fadeOut(400,function(){t.fadeIn(),scroll_to_class($(".form-wizard"),20)}),current_screen=t,$(this).parents("form").find("h3")[0].innerHTML="Summary",display_summary(current_screen[0])})});var $dropzone=$(".image_picker"),$droptarget=$(".drop_target"),$dropinput=$("#inputFile"),$dropimg=$(".image_preview"),$remover=$('[data-action="remove_current_image"]');$dropzone.on("dragover",function(){return $droptarget.addClass("dropping"),!1}),$dropzone.on("dragend dragleave",function(){return $droptarget.removeClass("dropping"),!1}),$dropzone.on("drop",function(n){$droptarget.removeClass("dropping"),$droptarget.addClass("dropped"),$remover.removeClass("disabled"),n.preventDefault();var e=n.originalEvent.dataTransfer.files[0],t=new FileReader;return t.onload=function(n){$dropimg.css("background-image","url("+n.target.result+")")},console.log(e),t.readAsDataURL(e),!1}),$dropinput.change(function(n){$droptarget.addClass("dropped"),$remover.removeClass("disabled"),$(".image_title input").val("");var e=$dropinput.get(0).files[0],t=new FileReader;t.onload=function(n){$dropimg.css("background-image","url("+n.target.result+")")},t.readAsDataURL(e)}),$remover.on("click",function(){$dropimg.css("background-image",""),$droptarget.removeClass("dropped"),$remover.addClass("disabled"),$(".image_title input").val("")}),$(".image_title input").blur(function(){""!=$(this).val()&&$droptarget.removeClass("dropped")});