/*!
 * Start Bootstrap - Agency v4.1.1 (https://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-agency/blob/master/LICENSE)
 */
"use strict";function scroll_to_class(n,e){var t=$(n).offset().top-e;$(window).scrollTop()!=t&&$(".form-wizard").stop().animate({scrollTop:t},0)}var selected_suffix,current_screen,form_prefix_id=".form-wizard fieldset#",first_screen_id="first-screen",adult_screen_id="adult-screen",bambino_screen_id="bambino-screen",junior_screen_id="junior-screen",final_screen_id="final-screen",suffix_banquet="-banquet",suffix_vin="-vin",last_prefix="last-",input_pattern="input#",vin_honneur_id=input_pattern+"vin_honneur",banquet_id=input_pattern+"banquet",number_adult_id=input_pattern+"number_adult",number_bambino_id=input_pattern+"number_bambino",number_junior_id=input_pattern+"number_junior",cannot_attend_id=input_pattern+"cannot_attend",stay_night_id=input_pattern+"stay_night",name_adult_id="name-adult",start_checkbox_1_id="starter-adult-banquet-1",start_checkbox_2_id="starter-adult-banquet-2",main_checkbox_1_id="main-adult-banquet-1",main_checkbox_2_id="main-adult-banquet-2",starter_adult_banquet="starter-adult-banquet",main_adult_banquet="main-adult-banquet",name_bambino_id="name-bambino",cannot_attend=!1,vin_honneur=!1,banquet=!1,stay_night=!1,nb_adult=0,nb_bambino=0,nb_junior=0,current_nb_adult=0,current_nb_bambino=0,current_nb_junior=0;function is_last_adult(){return current_nb_adult==nb_adult-1}function no_children(){return no_bambino()&&no_junior()}function no_bambino(){return 0==nb_bambino}function is_last_bambino(){return current_nb_bambino==nb_bambino-1}function no_junior(){return 0==nb_junior}function is_last_junior(){return current_nb_junior==nb_junior-1}var adults=[],juniors=[],bambinos=[];function Adult(n,e,t,r,i,a,_,o){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=t,this.stay_for_the_night=r,this.starter_1=i,this.starter_2=a,this.main_1=_,this.main_2=o}function Bambino(n,e,t,r){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=t,this.stay_for_the_night=r}function Junior(n,e,t,r){this.name=n,this.attend_to_vin_honneur=e,this.attend_to_diner=t,this.stay_for_the_night=r}function addAdult(n){var e=n.find(input_pattern+name_adult_id)[0].value;if(banquet)var t=n.find(input_pattern+start_checkbox_1_id)[0].checked,r=n.find(input_pattern+start_checkbox_2_id)[0].checked,i=n.find(input_pattern+main_checkbox_1_id)[0].checked,a=n.find(input_pattern+main_checkbox_2_id)[0].checked;else t=banquet,r=banquet,i=banquet,a=banquet;var _=new Adult(e,vin_honneur,banquet,stay_night,t,r,i,a);adults.push(_),console.log(_.name+", "+_.attend_to_vin_honneur+", "+_.attend_to_diner+", "+_.stay_for_the_night+", "+_.starter_1+", "+_.starter_2+", "+_.main_1+", "+_.main_2),current_nb_adult++}function addBambino(n){var e=new Bambino(n.find(input_pattern+name_bambino_id)[0].value,vin_honneur,banquet,stay_night);bambinos.push(e),console.log(e.name+", "+e.attend_to_vin_honneur+", "+e.attend_to_diner),current_nb_bambino++}function addJunior(n){var e=new Junior(n.find(input_pattern+name_junior_id)[0].value,vin_honneur,banquet,stay_night);juniors.push(e),console.log(e.name+", "+e.attend_to_vin_honneur+", "+e.attend_to_diner),current_nb_junior++}function fields_validation(n){var e=!0;return n.find("input").each(function(){$(this).removeClass("input-error"),$(this)[0].required&&""==$(this)[0].value&&($(this).addClass("input-error"),e=!1)}),e}function restore_previous_answer_bambinos(n){var e=bambinos[current_nb_bambino].name;n.find(input_pattern+name_bambino_id)[0].value=e}function restore_previous_answer_junior(n){var e=juniors[current_nb_junior].name;n.find(input_pattern+name_junior_id)[0].value=e}function restore_previous_answer_adult(n){var e=adults[current_nb_adult].name;n.find(input_pattern+name_adult_id)[0].value=e,banquet&&(n.find(input_pattern+start_checkbox_1_id)[0].checked=adults[current_nb_adult].starter_1,n.find(input_pattern+start_checkbox_2_id)[0].checked=adults[current_nb_adult].starter_2,n.find(input_pattern+main_checkbox_1_id)[0].checked=adults[current_nb_adult].main_1,n.find(input_pattern+main_checkbox_2_id)[0].checked=adults[current_nb_adult].main_2)}function get_next_screen_id(n,e){var t=form_prefix_id+(e?last_prefix:"")+n+selected_suffix;return console.log("next screen id: "+t),t}function set_errors_on_checkboxes(n){n.find("input").each(function(){"checkbox"==$(this)[0].type&&$(this).addClass("checkbox-error")})}function display_summary(n){var e=document.createElement("div"),t=document.createElement("h4");t.innerHTML="Adults",e.appendChild(t);var r=get_all_names(),i=document.createElement("p");i.innerHTML=build_sentence_to_attend(r),e.appendChild(i),n.appendChild(e)}function build_sentence_to_attend(n){for(var e="",t=0;t<n.length-2;t++)e+=n[t]+", ";return e+=n[length-2]+" and "+n[length-1]+" will attend to ",vin_honneur?(e+=" to the vin d'honneur",e+=banquet?" and to the banquet.":"."):e+=" to the banquet.",e}function get_all_names(){var n=[];return iterate_and_append(adults,n),iterate_and_append(bambinos,n),iterate_and_append(juniors,n),n}function iterate_and_append(n,e){console.log(n);for(var t=0;t<n.length;t++){var r=n[t];console.log(r),console.log(r.name),e.push(r.name),console.log(e)}}$("#form").change(function(){$(this).find(".checkbox-error").each(function(){$(this).removeClass("checkbox-error")})}),jQuery(document).ready(function(){$(".form-wizard fieldset:first").fadeIn("slow"),current_screen=$(".form-wizard fieldset:first"),$(".form-wizard .required").on("focus",function(){$(this).removeClass("input-error")}),$(".form-wizard .btn-next").on("click",function(){var n=$(this).parents("fieldset"),e=fields_validation(n);if(e){var t;if(current_screen[0].id==first_screen_id){if(vin_honneur=n.find(vin_honneur_id)[0].checked,banquet=n.find(banquet_id)[0].checked,cannot_attend=n.find(cannot_attend_id)[0].checked,stay_night=n.find(stay_night_id)[0].checked,nb_adult=n.find(number_adult_id)[0].value,nb_bambino=n.find(number_bambino_id)[0].value,nb_junior=n.find(number_junior_id)[0].value,console.log(cannot_attend+", "+vin_honneur+", "+banquet+", "+stay_night+", "+nb_adult+", "+nb_bambino+", "+nb_junior),current_nb_junior=current_nb_bambino=current_nb_adult=0,cannot_attend&&(banquet||vin_honneur||stay_night))return void set_errors_on_checkboxes(n);if(!cannot_attend&&!banquet&&!vin_honneur)return void set_errors_on_checkboxes(n);if(!banquet&&stay_night)return void set_errors_on_checkboxes(n);selected_suffix=banquet?suffix_banquet:suffix_vin,console.log(is_last_adult()&&no_children());var r=form_prefix_id+(is_last_adult()&&no_children()?last_prefix:"")+adult_screen_id+selected_suffix;console.log("next_screen_id "+r),(t=$(r)).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1)}else current_screen[0].id.includes("adult")?(addAdult(n),current_nb_adult==nb_adult?t=no_bambino()?$(get_next_screen_id(junior_screen_id,is_last_junior())):$(get_next_screen_id(bambino_screen_id,is_last_bambino()&&no_junior())):(t=$(get_next_screen_id(adult_screen_id,is_last_adult()&&no_children()))).find("h3")[0].innerHTML="Adult "+(current_nb_adult+1)):current_screen[0].id.includes("bambino")?(addBambino(n),current_nb_bambino==nb_bambino?t=$(get_next_screen_id(junior_screen_id,is_last_junior())):(t=$(get_next_screen_id(bambino_screen_id,is_last_bambino()&&no_junior()))).find("h3")[0].innerHTML="Bambino "+(current_nb_bambino+1)):current_screen[0].id.includes("junior")&&(addJunior(n),(t=$(get_next_screen_id(junior_screen_id,is_last_junior()))).find("h3")[0].innerHTML="Junior "+(current_nb_junior+1));e?(n.fadeOut(400,function(){t.fadeIn(),$("form").trigger("reset"),scroll_to_class($(".form-wizard"),20)}),current_screen=t):$("form").trigger("reset")}}),$(".form-wizard .btn-previous").on("click",function(){var n;$("form").trigger("reset"),console.log(current_screen[0].id),current_screen[0].id.includes("adult")?0==current_nb_adult?n=$(form_prefix_id+first_screen_id):((n=$(form_prefix_id+adult_screen_id+selected_suffix)).find("h3")[0].innerHTML="Adult "+current_nb_adult,current_nb_adult--,restore_previous_answer_adult(n),adults.splice(current_nb_adult,1)):current_screen[0].id.includes("bambino")&&(0==current_nb_bambino?((n=$(form_prefix_id+adult_screen_id+selected_suffix)).find("h3")[0].innerHTML="Adult "+current_nb_adult,current_nb_adult--,restore_previous_answer_adult(n),adults.splice(current_nb_adult,1)):((n=n=$(form_prefix_id+bambino_screen_id+selected_suffix)).find("h3")[0].innerHTML="Bambino "+current_nb_bambino,current_nb_bambino--,restore_previous_answer_bambinos(n),bambinos.splice(current_nb_bambino,1))),$(this).parents("fieldset").fadeOut(400,function(){console.log(n),n.fadeIn(),scroll_to_class($(".form-wizard"),20)}),current_screen=n}),$(".form-wizard .btn-submit").on("click",function(n){var e=$(this).parents("fieldset");if(fields_validation(e)){$(this).find(".required").each(function(){""==$(this).val()?(n.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),current_screen[0].id.startsWith("last-adult")&&addAdult(e);for(var t=0;t<nb_adult;t++){var r=adults[t];console.log(r.name+", "+r.attend_to_vin_honneur+", "+r.attend_to_diner+", "+r.starter_1+", "+r.starter_2+", "+r.main_1+", "+r.main_2)}}var i=$(form_prefix_id+final_screen_id);e.fadeOut(400,function(){i.fadeIn(),scroll_to_class($(".form-wizard"),20)}),current_screen=i,$(this).parents("form").find("h3")[0].innerHTML="Summary",display_summary(current_screen[0])})});var $dropzone=$(".image_picker"),$droptarget=$(".drop_target"),$dropinput=$("#inputFile"),$dropimg=$(".image_preview"),$remover=$('[data-action="remove_current_image"]');$dropzone.on("dragover",function(){return $droptarget.addClass("dropping"),!1}),$dropzone.on("dragend dragleave",function(){return $droptarget.removeClass("dropping"),!1}),$dropzone.on("drop",function(n){$droptarget.removeClass("dropping"),$droptarget.addClass("dropped"),$remover.removeClass("disabled"),n.preventDefault();var e=n.originalEvent.dataTransfer.files[0],t=new FileReader;return t.onload=function(n){$dropimg.css("background-image","url("+n.target.result+")")},console.log(e),t.readAsDataURL(e),!1}),$dropinput.change(function(n){$droptarget.addClass("dropped"),$remover.removeClass("disabled"),$(".image_title input").val("");var e=$dropinput.get(0).files[0],t=new FileReader;t.onload=function(n){$dropimg.css("background-image","url("+n.target.result+")")},t.readAsDataURL(e)}),$remover.on("click",function(){$dropimg.css("background-image",""),$droptarget.removeClass("dropped"),$remover.addClass("disabled"),$(".image_title input").val("")}),$(".image_title input").blur(function(){""!=$(this).val()&&$droptarget.removeClass("dropped")});